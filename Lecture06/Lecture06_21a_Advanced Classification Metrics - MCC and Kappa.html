<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCC and Cohen's Kappa</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Aptos, 'Segoe UI', sans-serif; background: #FFFFFF; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        .container { width: 960px; height: 540px; padding: 25px 35px; display: flex; flex-direction: column; }
        .title-section { text-align: center; margin-bottom: 12px; }
        .main-title { font-size: 24px; font-weight: 600; color: #1E64C8; margin-bottom: 4px; }
        .subtitle { font-size: 14px; color: #666; }
        .content-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; flex: 1; }
        .metric-card { background: white; border: 2.5px solid #1E64C8; border-radius: 12px; padding: 14px; display: flex; flex-direction: column; }
        .metric-card.mcc { border-color: #9C27B0; }
        .metric-card.kappa { border-color: #FF9800; }
        .metric-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; padding-bottom: 8px; border-bottom: 2px solid #e0e0e0; }
        .metric-name { font-size: 18px; font-weight: 700; }
        .mcc .metric-name { color: #9C27B0; }
        .kappa .metric-name { color: #FF9800; }
        .formula-box { background: #f8f8f8; border-radius: 8px; padding: 12px; margin-bottom: 10px; text-align: center; }
        .formula-main { font-size: 13px; font-weight: 600; color: #333; font-family: 'Times New Roman', serif; }
        .range-box { display: flex; justify-content: center; gap: 20px; margin: 10px 0; }
        .range-item { text-align: center; font-size: 12px; }
        .range-value { font-weight: 700; font-size: 14px; }
        .mcc .range-value { color: #9C27B0; }
        .kappa .range-value { color: #FF9800; }
        .feature-list { flex: 1; }
        .feature-item { display: flex; align-items: flex-start; gap: 8px; font-size: 12px; color: #333; margin-bottom: 6px; line-height: 1.4; }
        .feature-icon { font-weight: bold; flex-shrink: 0; }
        .mcc .feature-icon { color: #9C27B0; }
        .kappa .feature-icon { color: #FF9800; }
        .code-box { background: #2d2d2d; border-radius: 6px; padding: 10px; margin-top: auto; }
        .code-content { font-family: 'Courier New', monospace; font-size: 11px; color: #d4d4d4; line-height: 1.4; }
        .code-keyword { color: #569cd6; }
        .interp-table { width: 100%; font-size: 11px; border-collapse: collapse; margin-top: 8px; }
        .interp-table th { background: #FF9800; color: white; padding: 4px; }
        .interp-table td { padding: 4px; text-align: center; border-bottom: 1px solid #e0e0e0; }
        .bottom-box { background: #E8F5E9; border: 2px solid #4CAF50; border-radius: 10px; padding: 12px; margin-top: 12px; }
        .bottom-title { font-size: 14px; font-weight: 700; color: #2E7D32; margin-bottom: 8px; text-align: center; }
        .comparison-row { display: flex; justify-content: space-around; font-size: 12px; }
        .comparison-item { text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <div class="title-section">
            <div class="main-title">Advanced Classification Metrics: MCC & Kappa</div>
            <div class="subtitle">Balanced metrics for imbalanced classification problems</div>
        </div>
        <div class="content-grid">
            <div class="metric-card mcc">
                <div class="metric-header">
                    <span class="metric-name">Matthews Correlation Coefficient</span>
                </div>
                <div class="formula-box">
                    <div class="formula-main">MCC = (TP×TN - FP×FN) / √[(TP+FP)(TP+FN)(TN+FP)(TN+FN)]</div>
                </div>
                <div class="range-box">
                    <div class="range-item"><div class="range-value">-1</div><div>Total disagree</div></div>
                    <div class="range-item"><div class="range-value">0</div><div>Random</div></div>
                    <div class="range-item"><div class="range-value">+1</div><div>Perfect</div></div>
                </div>
                <div class="feature-list">
                    <div class="feature-item"><span class="feature-icon">✓</span><span>Uses ALL confusion matrix elements</span></div>
                    <div class="feature-item"><span class="feature-icon">✓</span><span>Balanced even with class imbalance</span></div>
                    <div class="feature-item"><span class="feature-icon">✓</span><span>TN reflected (unlike F1)</span></div>
                    <div class="feature-item"><span class="feature-icon">✓</span><span>Preferred at Google, Facebook</span></div>
                </div>
                <div class="code-box">
                    <div class="code-content">
                        <span class="code-keyword">from</span> sklearn.metrics <span class="code-keyword">import</span> matthews_corrcoef<br>
                        mcc = matthews_corrcoef(y_true, y_pred)
                    </div>
                </div>
            </div>
            <div class="metric-card kappa">
                <div class="metric-header">
                    <span class="metric-name">Cohen's Kappa (κ)</span>
                </div>
                <div class="formula-box">
                    <div class="formula-main">κ = (p_o - p_e) / (1 - p_e)<br><small style="color:#666">p_o = observed accuracy, p_e = expected by chance</small></div>
                </div>
                <table class="interp-table">
                    <tr><th>κ Value</th><th>Interpretation</th></tr>
                    <tr><td>< 0</td><td>Worse than chance</td></tr>
                    <tr><td>0.21-0.40</td><td>Fair</td></tr>
                    <tr><td>0.41-0.60</td><td>Moderate</td></tr>
                    <tr><td>0.61-0.80</td><td>Substantial</td></tr>
                    <tr><td>0.81-1.00</td><td>Almost perfect</td></tr>
                </table>
                <div class="feature-list" style="margin-top: 8px;">
                    <div class="feature-item"><span class="feature-icon">✓</span><span>Corrects for chance agreement</span></div>
                    <div class="feature-item"><span class="feature-icon">✓</span><span>Standard in medical/psychology</span></div>
                </div>
                <div class="code-box">
                    <div class="code-content">
                        <span class="code-keyword">from</span> sklearn.metrics <span class="code-keyword">import</span> cohen_kappa_score<br>
                        kappa = cohen_kappa_score(y_true, y_pred)
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom-box">
            <div class="bottom-title">When to Use Each Metric</div>
            <div class="comparison-row">
                <div class="comparison-item"><strong>Accuracy:</strong> Balanced classes only</div>
                <div class="comparison-item"><strong>F1:</strong> Care more about positive class</div>
                <div class="comparison-item"><strong>MCC:</strong> Best single metric for imbalance</div>
                <div class="comparison-item"><strong>Kappa:</strong> Inter-rater agreement</div>
            </div>
        </div>
    </div>
</body>
</html>
